!function(){function e(e){var t;try{t=JSON.parse(e.data)}catch(i){return void console.error("Failed to parse panel message [queuePanel.js]: "+i.message)}if(panelHasQuery(t)&&panelCheckQuery(t,"queue_list")){var r,a=t.results,n='<table class="table table-hover table-striped"><tr><th>Username</th><th style="padding-left: 50px;">GamerTag</th><th style="padding-left: 50px;">Position</th><th style="padding-left: 50px;">Join Time</th><th style="float: right;"></td>',o="";if(0===a.length)return void $("#queue-list").html("<i>The queue list is currently empty.</i>");for(r in a)o=JSON.parse(a[r].value),n+="<tr><td>"+o.username+"</td><td>"+(""===o.tag?"None":o.tag.substring(0,15))+"</td><td>"+o.position+"</td><td>"+o.time+'</td><td><button type="button" id="delete_user_'+o.username+'" class="btn btn-info btn-fill btn-xs" onclick="$.runCommand(\'remove\', \''+[o.username]+'\')"><i class="fa fa-trash"/></button></td></tr>';n+="</table>",$("#queue-list").html(n)}}function t(){sendDBKeys("queue_list","queue")}function i(e,i){if("clear"==e)sendWSEvent("queue","./systems/queueSystem.js",null,["clear"]);else if("close"==e)sendWSEvent("queue","./systems/queueSystem.js",null,["close"]);else if("remove"==e)$("#delete_user_"+i).html('<i  class="fa fa-spinner fa-spin"/>'),sendWSEvent("queue","./systems/queueSystem.js",null,["remove",i]);else if("open"==e){var a=$("#queue-title").val(),n=$("#queue-size").val();void 0!==a&&void 0!==n&&sendWSEvent("queue","./systems/queueSystem.js",null,["open",n,a]),$("#queue-title").val(""),$("#queue-size").val("0")}else if("pick"==e){var o=$("#queue-amount").val();void 0!==o&&sendWSEvent("queue","./systems/queueSystem.js",null,["pick",o]),$("#queue-amount").val("1")}setTimeout(function(){t()},TIMEOUT_WAIT_TIME)}$("#queuePanel").load("/panel/queue.html");var a=setInterval(function(){if(isConnected&&TABS_INITIALIZED){var e=$("#tabs").tabs("option","active");17==e&&(t(),clearInterval(a))}},INITIAL_WAIT_TIME);setInterval(function(){var e=$("#tabs").tabs("option","active");17==e&&isConnected&&!isInputFocus()&&(newPanelAlert("Refreshing Queue Data","success",1e3),t())},2e4),$.queueOnMessage=e,$.queueDoQuery=t,$.runCommand=i}();