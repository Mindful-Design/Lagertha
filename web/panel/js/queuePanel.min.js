!function(){function e(e){var a;try{a=JSON.parse(e.data)}catch(o){return void console.error("Failed to parse panel message [queuePanel.js]: "+o.message)}if(panelHasQuery(a)&&panelCheckQuery(a,"queue_list")){var t,i=a.results,r='<table class="table table-hover table-striped"><tr><th>Username</th><th style="padding-left: 50px;">GamerTag</th><th style="padding-left: 50px;">Position</th><th style="padding-left: 50px;">Join Time</th><th style="float: right;"></td>',n="";if(0===i.length)return void $("#queue-list").html("<i>The queue list is currently empty.</i>");for(t in i)n=JSON.parse(i[t].value),r+="<tr><td>"+n.username+"</td><td>"+(""===n.tag?"None":n.tag.substring(0,15))+"</td><td>"+n.position+"</td><td>"+n.time+'</td><td><button type="button" id="delete_user_'+n.username+'" class="btn btn-info btn-fill btn-xs" onclick="$.runCommand(\'remove\', \''+[n.username]+'\')"><i class="fa fa-trash"/></button></td></tr>';r+="</table>",$("#queue-list").html(r)}}function a(){sendDBKeys("queue_list","queue")}function o(e,o){if("clear"==e)sendWSEvent("queue","./systems/queueSystem.js",null,["clear"]);else if("close"==e)sendWSEvent("queue","./systems/queueSystem.js",null,["close"]);else if("remove"==e)$("#delete_user_"+o).html('<i  class="fa fa-spinner fa-spin"/>'),sendWSEvent("queue","./systems/queueSystem.js",null,["remove",o]);else if("open"==e){var i=$("#queue-title").val(),r=$("#queue-size").val();void 0!==i&&void 0!==r&&sendWSEvent("queue","./systems/queueSystem.js",null,["open",r,i]),$("#queue-title").val(""),$("#queue-size").val("0")}else if("pick"==e){var n=$("#queue-amount").val();void 0!==n&&sendWSEvent("queue","./systems/queueSystem.js",null,["pick",n]),$("#queue-amount").val("1")}setTimeout(function(){a()},TIMEOUT_WAIT_TIME)}$("#queuePanel").load("/panel/queue.html");var i=setInterval(function(){if(isConnected&&TABS_INITIALIZED){var e=$("#tabs").tabs("option","active");17==e&&(a(),clearInterval(i))}},INITIAL_WAIT_TIME);setInterval(function(){var e=$("#tabs").tabs("option","active");17==e&&isConnected&&!isInputFocus()&&(newPanelAlert("Refreshing Queue Data","success",1e3),a())},2e4),$.queueOnMessage=e,$.queueDoQuery=a,$.runCommand=o}();