!function(){function c(n){var o;try{o=JSON.parse(n.data)}catch(s){return}if(panelHasQuery(o)){var c="",m="",f='<table class="table table-hover table-striped">',p="",h=!1;if(panelCheckQuery(o,"commands_cooldown")){f='<table class="table table-hover table-striped">';for(v in o.results)c=o.results[v].key,p=JSON.parse(o.results[v].value).seconds,h=!0,f+="<tr >    <td>!"+c+'</td>    <td>        <form onkeypress="return event.keyCode != 13">            <input type="text" data-toggle="tooltip" title="Click to edit the cooldown." onclick="$.editCooldown(\''+c+"', '"+p+"', '"+JSON.parse(o.results[v].value).isGlobal+'\')"                       id="editCommandCooldown_'+c.replace(/[^a-zA-Z0-9_]/g,"_SP_")+'"                   value="'+p+" seconds. (Global: "+JSON.parse(o.results[v].value).isGlobal+')" disabled/>              <button type="button" class="btn btn-default btn-fill btn-xs" onclick="$.editCooldown(\''+c+'\')"><i class="fa fa-pencil" /> </button>               <button type="button" class="btn btn-danger btn-xs" id="deleteCooldown_'+c+'" onclick="$.deleteCooldown(\''+c+'\')"><i class="fa fa-trash" /> </button>             </form>        </form>    </td></tr>';f+="</table>",h||(f="<i>No entries in cooldown table.</i>"),$("#cooldownList").html(f)}if(panelCheckQuery(o,"commands_cooldownsettings")){for(v in o.results)c=o.results[v].key,p=o.results[v].value,panelMatch(c,"modCooldown")?a=o.results[v].value:panelMatch(c,"defaultCooldownTime")&&$("#defaultCooldownInput").val(o.results[v].value);$("#toggleModCooldown").html(e[a])}}if(panelCheckQuery(o,"commands_cooldownmsg")&&null!=o.results.coolDownMsgEnabled&&void 0!=o.results.coolDownMsgEnabled&&(i=o.results.coolDownMsgEnabled),panelCheckQuery(o,"commands_permcommsg")&&null!=o.results.permComMsgEnabled&&void 0!=o.results.permComMsgEnabled&&(l=o.results.permComMsgEnabled),$("#cooldownMsg").html(e[i]),$("#permcomMsg").html(e[l]),panelCheckQuery(o,"commands_commands")){if(0===o.results.length)return void $("#customCommandsList").html("<i>There are no custom commands defined.</i>");f='<table class="table table-hover table-striped">',r.splice(0);for(var v in o.results)c=o.results[v].key,commandNameSafe=c.replace(/\?/g,"__QM__"),m=o.results[v].value,r.push(c),m=m.replace(/"/g,"''"),f+="<tr >    <td>!"+c+'</td>    <td>       <form role="form" lpformnum="9" onkeypress="return event.keyCode != 13">       <div class="form-group form-group-table">       <div class="input-group">           <input type="text" class="form-control" id="editCommand_'+commandNameSafe.replace(/[^a-zA-Z0-9_]/g,"_SP_")+'"                   value="'+m+'" />           <span class="input-group-btn">           <button class="btn btn-default btn-fill btn-xs" type="button" onclick="$.editCustomCommand(\''+c+'\')"><i class="fa fa-pencil" /></button>           <button class="btn btn-danger btn-fill btn-xs" type="button" id="deleteCommand_'+commandNameSafe.replace(/[^a-zA-Z0-9_]/g,"_SP_")+'" onclick="$.deleteCommand(\''+c+'\')""><i class="fa fa-trash" /></button>           </span>           </div>           </div>           </form>   </td></tr>';f+="</table>",$("#customCommandsList").html(f),handleInputFocus()}if(panelCheckQuery(o,"commands_aliases")){if(0===o.results.length)return void $("#aliasCommandsList").html("<i>There are no aliased commands defined.</i>");for(v in o.results)c=o.results[v].key,m=o.results[v].value,f+="<tr >    <td>!"+m+"</td>    <td>!"+c+'</td>    <td>        <div id="deleteAlias_'+c.replace(/[^a-zA-Z0-9_]/g,"_SP_")+'" type="button" class="btn btn-danger btn-fill btn-xs"              onclick="$.deleteAlias(\''+c+'\')"><i class="fa fa-trash" />        </div>    </td></tr>';f+="</table>",$("#aliasCommandsList").html(f)}if(panelCheckQuery(o,"commands_pricecom")){if(0===o.results.length)return void $("#priceCommandsList").html("<i>There are no commands with prices defined.</i>");for(v in o.results)c=o.results[v].key,m=o.results[v].value,f+="<tr >    <td>!"+c+'</td>    <td>       <form role="form" lpformnum="9" onkeypress="return event.keyCode != 13">       <div class="form-group form-group-table">       <div class="input-group">              <input type="text" class="form-control" id="editCommandPrice_'+c.replace(/[^a-zA-Z0-9_]/g,"_SP_")+'"                   value="'+m+'" />              <span class="input-group-btn">              <button type="button" class="btn btn-default btn-fill btn-xs" onclick="$.updateCommandPrice(\''+c+'\')"><i class="fa fa-pencil" /> </button>               <button type="button" class="btn btn-danger btn-fill btn-xs" id="deleteCommandPrice_'+c.replace(/[^a-zA-Z0-9_]/g,"_SP_")+'" onclick="$.deleteCommandPrice(\''+c+'\')"><i class="fa fa-trash" /> </button>           </span>           </div>           </div>           </form>   </td></tr>';f+="</table>",$("#priceCommandsList").html(f),handleInputFocus()}if(panelCheckQuery(o,"commands_payment")){if(0===o.results.length)return void $("#payCommandsList").html("<i>There are no commands with payments defined.</i>");for(v in o.results)c=o.results[v].key,m=o.results[v].value,f+="<tr >    <td>!"+c+'</td>    <td>        <form onkeypress="return event.keyCode != 13">            <input  type="text" id="editCommandPay_'+c.replace(/[^a-zA-Z0-9_]/g,"_SP_")+'"                   value="'+m+'" />              <button type="button" class="btn btn-danger btn-fill btn-xs" onclick="$.updateCommandPay(\''+c+'\')"><i class="fa fa-pencil" /> </button>               <button type="button" class="btn btn-default btn-fill btn-xs" id="deleteCommandPay_'+c.replace(/[^a-zA-Z0-9_]/g,"_SP_")+'" onclick="$.deleteCommandPay(\''+c+'\')"><i class="fa fa-trash" /> </button>             </form>        </form>    </td></tr>';f+="</table>",$("#payCommandsList").html(f),handleInputFocus()}if(panelCheckQuery(o,"commands_disabled")){d=[];for(v in o.results)d[o.results[v].key]=!0;sendDBKeys("commands_permcom","permcom")}if(panelCheckQuery(o,"commands_permcom")){var g=o.results;g.sort(u);for(v in g)c=g[v].key,m=g[v].value,f+="<tr ><td><strong>"+c+"</strong></td>",f+=-1===c.indexOf(" ")?void 0!==d[c]?'<td><div id="commandEnabled_'+c+'"         data-toggle="tooltip" title="Enable Command" class="button" onclick="$.commandEnable(\''+c+"', 'enable');\">    <i  class=\"fa fa-toggle-off\" /></div></td>":'<td><div id="commandEnabled_'+c+'"         data-toggle="tooltip" title="Disable Command" class="button" onclick="$.commandEnable(\''+c+"', 'disable');\">    <i  class=\"fa fa-toggle-on\" /></div></td>":"<td />",f+='<td /><td><div id="commandsList_'+c+'"><strong><font >'+t[m]+'    </font></strong></div></td><td><div data-toggle="tooltip" title="Set Caster" class="button" onclick="$.commandPermission(\''+c+'\', 0);">    <i class="fa fa-television" /></div></td><td><div data-toggle="tooltip" title="Set Admin" class="button" onclick="$.commandPermission(\''+c+'\', 1);">    <i class="fa fa-cog" /></div></td><td><div data-toggle="tooltip" title="Set Mod" class="button" onclick="$.commandPermission(\''+c+'\', 2);">    <i class="fa fa-shield" /></div></td><td><div data-toggle="tooltip" title="Set Donator" class="button" onclick="$.commandPermission(\''+c+'\', 4);">    <i class="fa fa-dollar" /></div></td><td><div data-toggle="tooltip" title="Set Sub" class="button" onclick="$.commandPermission(\''+c+'\', 3);">    <i class="fa fa-credit-card" /></div></td><td><div data-toggle="tooltip" title="Set Regular" class="button" onclick="$.commandPermission(\''+c+'\', 6);">    <i class="fa fa-clock-o" /></div></td><td><div data-toggle="tooltip" title="Set Viewer" class="button" onclick="$.commandPermission(\''+c+'\', 7);">    <i class="fa fa-user" /></div></td></tr>';f+="</table>",$("#permCommandsList").html(f),$('[data-toggle="tooltip"]').tooltip()}}function m(){sendDBKeys("commands_commands","command"),sendDBKeys("commands_aliases","aliases"),sendDBKeys("commands_pricecom","pricecom"),sendDBKeys("commands_payment","paycom"),sendDBKeys("commands_cooldown","cooldown"),sendDBKeys("commands_cooldownsettings","cooldownSettings"),sendDBKeys("commands_disabled","disabledCommands"),sendDBQuery("commands_cooldownmsg","settings","coolDownMsgEnabled"),sendDBQuery("commands_permcommsg","settings","permComMsgEnabled")}function u(e,t){return panelStrcmp(e.key,t.key)}function f(e){$("#deleteCommand_"+e.replace(/[^a-zA-Z0-9_]/g,"_SP_")).html('<i  class="fa fa-spinner fa-spin " / > '),e=e.toLowerCase(),sendDBDelete("commands_delcom_"+e,"command",e),sendDBDelete("commands_delcompermcom_"+e,"permcom",e),sendDBDelete("commands_delcompricecom_"+e,"pricecom",e),sendDBDelete("commands_delcompermcom_"+e,"permcom",e),sendDBDelete("commands_delcomalias_"+e,"aliases",e),sendDBDelete("commands_delcomcooldown_"+e,"cooldown",e),setTimeout(function(){m()},TIMEOUT_WAIT_TIME),setTimeout(function(){sendCommand("reloadcommand "+e)},TIMEOUT_WAIT_TIME)}function p(e){$("#deleteCommandPrice_"+replace(/[^a-zA-Z0-9_]/g,"_SP_")).html('<i  class="fa fa-spinner fa-spin " / > '),sendDBDelete("commands_delcomprice_"+e,"pricecom",e),setTimeout(function(){m()},TIMEOUT_WAIT_TIME),setTimeout(function(){sendCommand("reloadcommand")},TIMEOUT_WAIT_TIME)}function h(e){$("#deleteCommandPay_"+e.replace(/[^a-zA-Z0-9_]/g,"_SP_")).html('<i class="fa fa-spinner fa-spin fa-spin " />'),sendDBDelete("commands_delcompay_"+e,"paycom",e),setTimeout(function(){m()},TIMEOUT_WAIT_TIME),setTimeout(function(){sendCommand("reloadcommand")},TIMEOUT_WAIT_TIME)}function v(){var e=$("#addCommandCommand").val(),t=$("#addCommandText").val();return 0==e.length?($("#addCommandCommand").val("[ERROR] Please enter a value."),$("#addCommandText").val(""),void setTimeout(function(){$("#addCommandCommand").val("")},10*TIMEOUT_WAIT_TIME)):0==t.length?($("#addCommandText").val("[ERROR] Please enter a value."),$("#addCommandCommand").val(""),void setTimeout(function(){$("#addCommandText").val("")},10*TIMEOUT_WAIT_TIME)):e.match(/ /)?($("#addCommandCommand").val("[ERROR] Your command cannot contain a space."),$("#addCommandText").val(""),void setTimeout(function(){$("#addCommandCommand").val("")},10*TIMEOUT_WAIT_TIME)):(e.startsWith("!")&&(e=e.replace("!","")),$("#addCommandText").val("Command successfully added!"),sendDBUpdate("addCustomCommand","command",e.toLowerCase(),t),void setTimeout(function(){$("#addCommandText").val(""),$("#addCommandCommand").val(""),sendCommand("reloadcommand"),m()},TIMEOUT_WAIT_TIME))}function g(e){var t=$("#editCommand_"+e.replace(/\?/g,"__QM__").replace(/[^a-zA-Z0-9_]/g,"_SP_")).val();t=t.replace(/''/g,'"'),t.length>0&&(e=e.replace("!",""),sendDBUpdate("addCustomCommand","command",e.toLowerCase(),t),setTimeout(function(){m()},TIMEOUT_WAIT_TIME),setTimeout(function(){sendCommand("reloadcommand")},TIMEOUT_WAIT_TIME))}function _(){var e=$("#aliasCommandInput").val(),t=$("#aliasCommandInputAlias").val();return 0==t.length?($("#aliasCommandInputAlias").val("[ERROR] Please enter a value."),void setTimeout(function(){$("#aliasCommandInputAlias").val("")},2*TIMEOUT_WAIT_TIME)):0==e.length?($("#aliasCommandInput").val("[ERROR] Please enter a value."),void setTimeout(function(){$("#aliasCommandInput").val("")},2*TIMEOUT_WAIT_TIME)):(e.startsWith("!")?e=e.replace("!",""):t.startsWith("!")&&(t=t.replace("!","")),t=t.replace("!",""),e=e.replace("!",""),sendDBUpdate("addCommandAlias","aliases",e.toLowerCase(),t.toLowerCase()),setTimeout(function(){$("#aliasCommandInput").val(""),$("#aliasCommandInputAlias").val(""),sendCommand("reloadcommand")},TIMEOUT_WAIT_TIME),void setTimeout(function(){m()},TIMEOUT_WAIT_TIME))}function b(e){$("#deleteAlias_"+e.replace(/[^a-zA-Z0-9_]/g,"_SP_")).html('<i  class="fa fa-spinner fa-spin " / > '),0!=e.length&&(e=e.replace("!",""),sendDBDelete("commands_delalias_"+e,"aliases",e)),setTimeout(function(){m()},TIMEOUT_WAIT_TIME),setTimeout(function(){sendCommand("reloadcommand "+e)},TIMEOUT_WAIT_TIME)}function T(e,t){$("#commandsList_"+e.replace(/[^a-zA-Z0-9_]/g,"_SP_")).html('<i  class="fa fa-spinner fa-spin " / > '),0!=e.length&&0!=t.length&&(e=e.replace("!",""),sendCommand("permcomsilent "+e.toLowerCase()+" "+String(t))),setTimeout(function(){m()},TIMEOUT_WAIT_TIME),setTimeout(function(){sendCommand("reloadcommand")},TIMEOUT_WAIT_TIME)}function C(){var e=$("#setCommandPriceInput").val(),t=$("#setCommandPriceInputCommand").val();t.startsWith("!")&&(t=t.replace("!","")),0!=e.length&&0!=t.length&&(sendDBUpdate("commandPrice","pricecom",t.toLowerCase(),e),$("#setCommandPriceInput").val(""),$("#setCommandPriceInputCommand").val(""),setTimeout(function(){m()},TIMEOUT_WAIT_TIME))}function I(){var e=$("#setCommandPayInput").val(),t=$("#setCommandPayInputCommand").val();t.startsWith("!")&&(t=t.replace("!","")),0!=e&&0!=t.length&&(sendDBUpdate("commandPay","paycom",t.toLowerCase(),e),$("#setCommandPayInput").val(""),$("#setCommandPayInputCommand").val(""),setTimeout(function(){m()},TIMEOUT_WAIT_TIME))}function w(e){var t=$("#editCommandPrice_"+e.replace(/[^a-zA-Z0-9_]/g,"_SP_")).val();$("#editCommandPrice_"+e.replace(/[^a-zA-Z0-9_]/g,"_SP_")).html('<i  class="fa fa-spinner fa-spin " / > '),t>0&&(sendDBUpdate("commands_editprice_"+e,"pricecom",e.toLowerCase(),t),setTimeout(function(){m()},TIMEOUT_WAIT_TIME),setTimeout(function(){sendCommand("reloadcommand")},TIMEOUT_WAIT_TIME))}function y(e){var t=$("#editCommandPay_"+e.replace(/[^a-zA-Z0-9_]/g,"_SP_")).val();$("#editCommandPay_"+e.replace(/[^a-zA-Z0-9_]/g,"_SP_")).html('<i  class="fa fa-spinner fa-spin " / > '),t.length>0&&(sendDBUpdate("commands_editpay_"+e,"paycom",e.toLowerCase(),t),setTimeout(function(){m()},TIMEOUT_WAIT_TIME),setTimeout(function(){sendCommand("reloadcommand")},TIMEOUT_WAIT_TIME))}function E(){$("#cooldownMsg").html('<i  class="fa fa-spinner fa-spin " / > '),"true"==i?sendDBUpdate("commands_cooldownmsg","settings","coolDownMsgEnabled","false"):"false"==i&&sendDBUpdate("commands_cooldownmsg","settings","coolDownMsgEnabled","true"),sendCommand("reloadinit"),setTimeout(function(){m()},2*TIMEOUT_WAIT_TIME)}function M(){$("#permcomMsg").html('<i  class="fa fa-spinner fa-spin " / > '),"true"==l?sendDBUpdate("commands_permcommsg","settings","permComMsgEnabled","false"):"false"==l&&sendDBUpdate("commands_permcommsg","settings","permComMsgEnabled","true"),sendCommand("reloadinit"),setTimeout(function(){m()},2*TIMEOUT_WAIT_TIME)}function P(){$("#toggleModCooldown").html('<i  class="fa fa-spinner fa-spin " / > '),"true"==a?sendDBUpdate("commands_cooldown_toggle","cooldownSettings","modCooldown","false"):"false"==a&&sendDBUpdate("commands_cooldown_toggle","cooldownSettings","modCooldown","true"),setTimeout(function(){m()},2*TIMEOUT_WAIT_TIME),setTimeout(function(){sendCommand("reloadcooldown")},2*TIMEOUT_WAIT_TIME)}function A(){var e=$("#defaultCooldownInput").val();e.length>0&&(sendDBUpdate("commands_cooldown_time","cooldownSettings","defaultCooldownTime",String(e)),setTimeout(function(){m()},2*TIMEOUT_WAIT_TIME))}function k(e){$("#deleteCooldown_"+e.replace(/[^a-zA-Z0-9_]/g,"_SP_")).html('<i  class="fa fa-spinner fa-spin " / > '),sendDBDelete("commands_cooldown_delete","cooldown",e),sendWSEvent("cooldown","./core/commandCoolDown.js",null,["remove",e]),setTimeout(function(){m()},TIMEOUT_WAIT_TIME)}function D(){var e=$("#cooldownCmdInput").val(),t=$("#cooldownCmdInputCommand").val(),n=$("#globalCooldownCheck").is(":checked");t.startsWith("!")&&(t=t.replace("!","")),e.length>0&&0!=t.length&&(sendDBUpdate("commands_cooldown_add","cooldown",String(t),JSON.stringify({command:String(t.toLowerCase()),seconds:String(e),isGlobal:String(n)})),setTimeout(function(){m(),sendWSEvent("cooldown","./core/commandCoolDown.js",null,["add",t.toLowerCase(),e,n])},TIMEOUT_WAIT_TIME),setTimeout(function(){$("#cooldownCmdInputCommand").val(""),$("#cooldownCmdInput").val(""),$("#globalCooldownCheck").prop("checked",!0)},5))}function S(e,t){panelMatch(t,"enable")?($("#commandEnabled_"+e).html('<i class="fa fa-toggle-on" />'),sendDBDelete("commands_enablecom","disabledCommands",e),sendCommand("registerpanel "+e)):($("#commandEnabled_"+e).html('<i class="fa fa-toggle-off" />'),sendDBUpdate("commands_enablecom","disabledCommands",e,"true"),sendCommand("unregisterpanel "+e)),setTimeout(function(){m()},TIMEOUT_WAIT_TIME)}function x(){var e=$("#commandImput").val();return 0==e.length?void $("#commandImput").val(""):(sendCommand(e.replace("!","")),$("#commandImput").val("command sent!"),void setTimeout(function(){$("#commandImput").val("")},TIMEOUT_WAIT_TIME))}var e=[],t=[],a="",i="false",l="true",d=[],r=[];e["false"]='<i  class="fa fa-circle text-warning" />',e["true"]='<i  class="fa fa-circle text-success" />',t[0]='<i class="fa fa-television" />',t[1]='<i class="fa fa-cog" />',t[2]='<i class="fa fa-shield" />',t[4]='<i class="fa fa-dollar" />',t[3]='<i class="fa fa-credit-card" />',t[6]='<i class="fa fa-clock-o" />',t[7]='<i class="fa fa-user" /></div>',$("#commandsPanel").load("/panel/commands.html");var O=setInterval(function(){if(isConnected&&TABS_INITIALIZED){var e=$("#tabs").tabs("option","active");1==e&&(m(),clearInterval(O))}},INITIAL_WAIT_TIME);setInterval(function(){var e=$("#tabs").tabs("option","active");1==e&&isConnected&&!isInputFocus()&&(newPanelAlert("Refreshing Commands Data","success",1e3),m())},3e4),$.commandsOnMessage=c,$.commandsDoQuery=m,$.deleteCommand=f,$.addCustomCommand=v,$.editCustomCommand=g,$.aliasCommand=_,$.deleteAlias=b,$.commandPermission=T,$.setCommandPrice=C,$.setCommandPay=I,$.updateCommandPrice=w,$.updateCommandPay=y,$.addCooldown=D,$.deleteCooldown=k,$.toggleModCooldown=P,$.setDefaultCooldown=A,$.commandEnable=S,$.deleteCommandPrice=p,$.deleteCommandPay=h,$.commands=r,$.runCustomCommand=x,$.toggleCooldownMsg=E,$.togglePermcomMsg=M}();