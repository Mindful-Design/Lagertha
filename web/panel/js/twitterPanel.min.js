!function(){function a(a){var n;try{n=JSON.parse(a.data)}catch(o){return}if(panelHasQuery(n)&&panelCheckQuery(n,"twitter_config")){var r,s,l,u;l='<table class="table table-hover table-striped">',u='<table class="table table-hover table-striped">';for(idx in n.results){switch(r=n.results[idx].key,s=n.results[idx].value,r){case"message_online":case"message_gamechange":case"message_update":case"polldelay_mentions":case"polldelay_retweets":case"polldelay_hometimeline":case"polldelay_usertimeline":case"postdelay_update":$("#"+r+"TweetInput").val(s)}0===r.indexOf("poll_")&&(l+="<tr >    <td>"+i[r]+'</td>    <td>        <div id="twitterStatus_"'+idx+'">'+e[s]+'</div>    </td>    <td>        <div data-toggle="tooltip" title="Enable" class="button"             onclick="$.toggleTwitter(\''+r+"', 'true', '"+idx+"')\">"+t["true"]+'        </div>    </td>    <td>        <div data-toggle="tooltip" title="Disable" class="button"             onclick="$.toggleTwitter(\''+r+"', 'false', '"+idx+"')\">"+t["false"]+"        </div>    </td></tr>"),0===r.indexOf("post_")&&(u+="<tr >    <td>"+i[r]+'</td>    <td>        <div id="twitterStatus_"'+idx+'">'+e[s]+'</div>    </td>    <td>        <div data-toggle="tooltip" title="Enable" class="button"             onclick="$.toggleTwitter(\''+r+"', 'true', '"+idx+"')\">"+t["true"]+'        </div>    </td>    <td>        <div data-toggle="tooltip" title="Disable" class="button"             onclick="$.toggleTwitter(\''+r+"', 'false', '"+idx+"')\">"+t["false"]+"        </div>    </td></tr>")}l+="</table>",u+="</table>",$("#twitterPollTable").html(l),$("#twitterPostTable").html(u),$('[data-toggle="tooltip"]').tooltip()}}function n(){sendDBKeys("twitter_config","twitter")}function o(e,t,i){$("#twitterStatus_"+i).html('<i  class="fa fa-spinner fa-spin" />'),sendDBUpdate("twitter_update","twitter",e,t),setTimeout(function(){n()},TIMEOUT_WAIT_TIME)}function r(){var e=$("#postTweetInput").val();e.length>0&&($("#postTweetInput").val(""),sendCommand("twitter post "+e))}function s(e){var t=$("#"+e+"TweetInput").val();return"postdelay_update"==e?(t>=180&&(sendDBUpdate("twitter_update","twitter",e,t),setTimeout(function(){n()},TIMEOUT_WAIT_TIME)),void setTimeout(function(){$("#"+e+"TweetInput").val("")},TIMEOUT_WAIT_TIME)):"polldelay_mentions"==e?(t>=60&&(sendDBUpdate("twitter_update","twitter",e,t),setTimeout(function(){n()},TIMEOUT_WAIT_TIME)),void setTimeout(function(){$("#"+e+"TweetInput").val("")},TIMEOUT_WAIT_TIME)):"polldelay_retweets"==e?(t>=60&&(sendDBUpdate("twitter_update","twitter",e,t),setTimeout(function(){n()},TIMEOUT_WAIT_TIME)),void setTimeout(function(){$("#"+e+"TweetInput").val("")},TIMEOUT_WAIT_TIME)):"polldelay_hometimeline"==e?(t>=60&&(sendDBUpdate("twitter_update","twitter",e,t),setTimeout(function(){n()},TIMEOUT_WAIT_TIME)),void setTimeout(function(){$("#"+e+"TweetInput").val("")},TIMEOUT_WAIT_TIME)):"polldelay_usertimeline"==e?(t>=15&&(sendDBUpdate("twitter_update","twitter",e,t),setTimeout(function(){n()},TIMEOUT_WAIT_TIME)),void setTimeout(function(){$("#"+e+"TweetInput").val("")},TIMEOUT_WAIT_TIME)):void(t.length>0&&(sendDBUpdate("twitter_update","twitter",e,t),setTimeout(function(){n()},TIMEOUT_WAIT_TIME)))}var e=[],t=[],i=[];e["false"]='<i class="fa fa-circle-o"/>',e["true"]='<i class="fa fa-circle text-success"/>',t["false"]='<i class="fa fa-circle-o" />',t["true"]='<i class="fa fa-circle text-success"/>',i.poll_mentions="Poll Mentions",i.poll_retweets="Poll Retweets",i.poll_hometimeline="Poll Home Timeline",i.poll_usertimeline="Poll User Timeline",i.post_online="Post When Stream Goes Online",i.post_gamechange="Post Game Change",i.post_update="Post Timed Automatic Updates",$("#twitterPanel").load("/panel/twitter.html");var l=setInterval(function(){if(isConnected&&TABS_INITIALIZED){var e=$("#tabs").tabs("option","active");19==e&&(n(),clearInterval(l))}},INITIAL_WAIT_TIME);setInterval(function(){var e=$("#tabs").tabs("option","active");19==e&&isConnected&&!isInputFocus()&&(newPanelAlert("Refreshing Twitter Data","success",1e3),n())},3e4),$.twitterOnMessage=a,$.twitterDoQuery=n,$.toggleTwitter=o,$.postTweet=r,$.updateDataTwitter=s}();