!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function i(t){var i=!1;return e('[data-notify="container"]').each(function(a,n){var o=e(n),r=o.find('[data-notify="title"]').text().trim(),s=o.find('[data-notify="message"]').html().trim(),l=r===e("<div>"+t.settings.content.title+"</div>").html().trim(),u=s===e("<div>"+t.settings.content.message+"</div>").html().trim(),h=o.hasClass("alert-"+t.settings.type);return l&&u&&h&&(i=!0),!i}),i}function a(a,n,o){var r={content:{message:"object"==typeof n?n.message:n,title:n.title?n.title:"",icon:n.icon?n.icon:"",url:n.url?n.url:"#",target:n.target?n.target:"-"}};o=e.extend(!0,{},r,o),this.settings=e.extend(!0,{},t,o),this._defaults=t,"-"===this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),(this.settings.allow_duplicates||!this.settings.allow_duplicates&&!i(this))&&this.init()}var t={element:"body",position:null,type:"info",allow_dismiss:!0,allow_duplicates:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace(RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},e.extend(a.prototype,{init:function(){var e=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(t,i){var a={};"string"==typeof t?a[t]=i:a=t;for(var n in a)switch(n){case"type":this.$ele.removeClass("alert-"+e.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+e.settings.type),e.settings.type=a[n],this.$ele.addClass("alert-"+a[n]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+a[n]);break;case"icon":var o=this.$ele.find('[data-notify="icon"]');"class"===e.settings.icon_type.toLowerCase()?o.removeClass(e.settings.content.icon).addClass(a[n]):(o.is("img")||o.find("img"),o.attr("src",a[n]));break;case"progress":var r=e.settings.delay-e.settings.delay*(a[n]/100);this.$ele.data("notify-delay",r),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",a[n]).css("width",a[n]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",a[n]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",a[n]);break;default:this.$ele.find('[data-notify="'+n+'"]').html(a[n])}var s=this.$ele.outerHeight()+parseInt(e.settings.spacing)+parseInt(e.settings.offset.y);e.reposition(s)},close:function(){e.close()}}},buildNotify:function(){var t=this.settings.content;this.$ele=e(String.format(this.settings.template,this.settings.type,t.title,t.message,t.url,t.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){this.$ele.addClass("alert-with-icon"),"class"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"50%",marginTop:"-13px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var t=this,i=this.settings.offset.y,a={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},n=!1,o=this.settings;switch(e('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){i=Math.max(i,parseInt(e(this).css(o.placement.from))+parseInt(e(this).outerHeight())+parseInt(o.spacing))}),this.settings.newest_on_top===!0&&(i=this.settings.offset.y),a[this.settings.placement.from]=i+"px",this.settings.placement.align){case"left":case"right":a[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":a.left=0,a.right=0}this.$ele.css(a).addClass(this.settings.animate.enter),e.each(Array("webkit-","moz-","o-","ms-",""),function(e,i){t.$ele[0].style[i+"AnimationIterationCount"]=1}),e(this.settings.element).append(this.$ele),this.settings.newest_on_top===!0&&(i=parseInt(i)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(i)),e.isFunction(t.settings.onShow)&&t.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(){n=!0}).one(this.animations.end,function(){e.isFunction(t.settings.onShown)&&t.settings.onShown.call(this)}),setTimeout(function(){n||e.isFunction(t.settings.onShown)&&t.settings.onShown.call(this)},600)},bind:function(){var t=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){t.close()}),this.$ele.mouseover(function(){e(this).data("data-hover","true")}).mouseout(function(){e(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){t.$ele.data("notify-delay",t.settings.delay);var i=setInterval(function(){var e=parseInt(t.$ele.data("notify-delay"))-t.settings.timer;if("false"===t.$ele.data("data-hover")&&"pause"===t.settings.mouse_over||"pause"!=t.settings.mouse_over){var a=(t.settings.delay-e)/t.settings.delay*100;t.$ele.data("notify-delay",e),t.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",a).css("width",a+"%")}e<=-t.settings.timer&&(clearInterval(i),t.close())},t.settings.timer)}},close:function(){var t=this,i=parseInt(this.$ele.css(this.settings.placement.from)),a=!1;this.$ele.data("closing","true").addClass(this.settings.animate.exit),t.reposition(i),e.isFunction(t.settings.onClose)&&t.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(){a=!0}).one(this.animations.end,function(){e(this).remove(),e.isFunction(t.settings.onClosed)&&t.settings.onClosed.call(this)}),setTimeout(function(){a||(t.$ele.remove(),t.settings.onClosed&&t.settings.onClosed(t.$ele))},600)},reposition:function(t){var i=this,a='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',n=this.$ele.nextAll(a);this.settings.newest_on_top===!0&&(n=this.$ele.prevAll(a)),n.each(function(){e(this).css(i.settings.placement.from,t),t=parseInt(t)+parseInt(i.settings.spacing)+e(this).outerHeight()})}}),e.notify=function(e,t){var i=new a(this,e,t);return i.notify},e.notifyDefaults=function(i){return t=e.extend(!0,{},t,i)},e.notifyClose=function(t){"undefined"==typeof t||"all"===t?e("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):e('[data-notify-position="'+t+'"]').find('[data-notify="dismiss"]').trigger("click")}});