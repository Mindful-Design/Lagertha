!function(){function v(e){var t;try{t=JSON.parse(e.data)}catch(i){return}if(panelHasQuery(t)){if(panelMatch(t.query_id,"dashboard_highlights")){var s="";for(var n in t.results){var a=t.results[n].value;s+=a+" @ "+t.results[n].key+"<br>"}0==s.length?$("#showHighlights").html("No Highlights Found"):$("#showHighlights").html(s)}if(panelCheckQuery(t,"dashboard_modules")){var r='<table class="table table-hover table-striped">',p='<table class="table table-hover table-striped">',v=t.results,_="",y="";$.disablePanels(v),v.sort(w);for(idx in v)_=v[idx].key,y=v[idx].value,-1===_.indexOf("/core/")&&-1===_.indexOf("/lang/")&&(-1===_.indexOf("./discord")?r+="<tr>    <td>"+_.replace(/.\/commands\/|.\/games\/|.\/handlers\/|.\/systems\//gi,function(e){return m[e]})+'</td>    <td>        <div id="moduleStatus_'+idx+'">'+f[y]+'</div>    </td>    <td>        <div data-toggle="tooltip" title="Enable" class="button"             onclick="$.enableModule(\''+_+"', "+idx+')">'+d["true"]+'        </div>    </td>    <td>        <div data-toggle="tooltip" title="Disable" class="button"             onclick="$.disableModule(\''+_+"', "+idx+')">'+d["false"]+"        </div>    </td></tr>":p+="<tr>    <td>"+_.replace(/.\/discord\/commands\/|.\/discord\/games\/|.\/discord\/handlers\/|.\/discord\/systems\//gi,function(e){return g[e]})+'</td>    <td>        <div id="moduleStatus_'+idx+'">'+f[y]+'</div>    </td>    <td>        <div data-toggle="tooltip" title="Enable" class="button"             onclick="$.enableModule(\''+_+"', "+idx+')">'+d["true"]+'        </div>    </td>    <td>        <div data-toggle="tooltip" title="Disable" class="button"             onclick="$.disableModule(\''+_+"', "+idx+')">'+d["false"]+"        </div>    </td></tr>");r+="</table>",p+="</table>",$("#modulesList").html(r),$("#discordModulesList").html(p),$('[data-toggle="tooltip"]').tooltip({trigger:"hover"})}if(panelCheckQuery(t,"dashboard_chatCount")){var x="",C="",k="";l=[];for(var n=0,T=10;9>=n;n++,T--){new Date;x=$.format.date(Date.now()-24*n*36e5,"MM.dd.yy"),C="chat_"+x,k="0";for(idx in t.results)if(panelMatch(t.results[idx].key,C)){k=t.results[idx].value;break}$("#chatDate-"+n).html("<span>"+x+"</span>"),$("#chatCount-"+n).html("<spam>"+k+"</span>"),l.push([T,k])}}if(panelCheckQuery(t,"dashboard_modCount")){var I="",M="",S="";o=[];for(var n=0,T=10;9>=n;n++,T--){new Date;I=$.format.date(Date.now()-24*n*36e5,"MM.dd.yy"),M="mod_"+I,S="0";for(idx in t.results)if(panelMatch(t.results[idx].key,M)){S=t.results[idx].value;break}$("#modCount-"+n).html("<spam>"+S+"</span>"),o.push([T,S])}}if(o.length>0&&l.length>0){var E={series:{shadowSize:0,curvedLines:{apply:!0,active:!0,monotonicFit:!0},lines:{show:!1,lineWidth:0}},grid:{borderWidth:0,labelMargin:10,hoverable:!0,clickable:!0,mouseActiveRadius:6},xaxis:{tickDecimals:0,ticks:!1},yaxis:{tickDecimals:0,ticks:!1},legend:{show:!1}};$.plot($("#panelStatsGraph"),[{data:l,lines:{show:!0,fill:.85},curvedLines:{apply:!0},label:"Messages",stack:!0,color:"#1DC7EA"},{data:o,lines:{show:!0,fill:.98},label:"Timeouts",stack:!0,color:"#FF4A55"}],E),$(".flot-chart")[0]&&$(".flot-chart").bind("plothover",function(e,t,i){if(i){var s=i.datapoint[0].toFixed(2),n=Math.round(i.datapoint[1].toFixed(2)),a=Date.today().add(s-10).day().toString("dddd");$(".flot-tooltip").html(i.series.label+" on "+a+": "+n).css({top:i.pageY+5,left:i.pageX+5}).show()}else $(".flot-tooltip").hide()})}if(panelCheckQuery(t,"dashboard_panelStatsEnabled")&&(panelMatch(t.results.enabled,"true")?panelStatsEnabled||(panelStatsEnabled=!0,b()):$("#panelStatsEnabled").html("<span>Panel Stats are Disabled</span>")),panelCheckQuery(t,"dashboard_streamTitle")&&(void 0===t.results.title||null===t.results.title?$("#streamTitleInput").val("Title"):$("#streamTitleInput").val(t.results.title)),panelCheckQuery(t,"dashboard_streamlastfollow")&&(null==t.results.lastFollow?$("#lastFollow").html(""):$("#lastFollow").html("<spam>Latest Follow: "+t.results.lastFollow+" </spam>")),panelCheckQuery(t,"dashboard_streamlastresub")&&(null==t.results.lastReSub?$("#lastReSub").html(""):$("#lastReSub").html("<spam>Latest ReSub: "+t.results.lastReSub+" </spam>")),panelCheckQuery(t,"dashboard_streamlastsub")&&(null==t.results.lastSub?$("#lastSub").html(""):$("#lastSub").html("<spam>Latest Sub: "+t.results.lastSub+" </spam>")),panelCheckQuery(t,"dashboard_streamlastdonator")&&(null==t.results.lastDonator?$("#lastDonator").html(""):$("#lastDonator").html("<spam>Latest Donator: "+t.results.lastDonator+" </spam>")),panelCheckQuery(t,"dashboard_gameTitle")&&(gameTitle=t.results.game,(void 0===gameTitle||null===gameTitle)&&(gameTitle="Some Game"),$("#gameTitleInput").val(gameTitle),sendDBQuery("dashboard_deathctr","deaths",gameTitle)),panelCheckQuery(t,"dashboard_loggingModeEvent")&&(u=t.results["log.event"],$("#logEvent").html(f[u])),panelCheckQuery(t,"dashboard_loggingModeFile")&&(c=t.results["log.file"],$("#logFile").html(f[c])),panelCheckQuery(t,"dashboard_loggingModeErr")&&(h=t.results["log.error"],$("#logError").html(f[h])),panelCheckQuery(t,"dashboard_deathctr")){if(amount=t.results[gameTitle],null==gameTitle||null==amount)return void $("#deathCounterValue").html("0");$("#deathCounterValue").html(t.results[gameTitle])}panelCheckQuery(t,"dashboard_dsChannels")&&(void 0!==t.results.otherChannels&&null!==t.results.otherChannels?$("#multiLinkInput").val(t.results.otherChannels.replace(/\//g," ")):$("#multiLinkInput").attr("placeholder","Channel-1 Channel-2")),panelCheckQuery(t,"dashboard_dsInterval")&&(void 0!==t.results.timerInterval&&null!==t.results.timerInterval?$("#multiLinkTimerInput").attr("placeholder",t.results.timerInterval):$("#multiLinkTimerInput").attr("placeholder","Minutes")),panelCheckQuery(t,"dashboard_dsReqMsgs")&&(void 0!==t.results.reqMessages&&null!==t.results.reqMessages?$("#multiLinkReqMsgsInput").attr("placeholder",t.results.reqMessages):$("#multiLinkReqMsgsInput").attr("placeholder","Message Count")),panelCheckQuery(t,"dashboard_logRotate")&&$("#logRotateInput").val(t.results.log_rotate_days)}}function b(){sendDBQuery("dashboard_streamTitle","streamInfo","title"),sendDBQuery("dashboard_streamlastfollow","streamInfo","lastFollow"),sendDBQuery("dashboard_streamlastresub","streamInfo","lastReSub"),sendDBQuery("dashboard_streamlastsub","streamInfo","lastSub"),sendDBQuery("dashboard_streamlastdonator","streamInfo","lastDonator"),sendDBQuery("dashboard_gameTitle","streamInfo","game"),sendDBQuery("dashboard_loggingModeEvent","settings","log.event"),sendDBQuery("dashboard_loggingModeFile","settings","log.file"),sendDBQuery("dashboard_loggingModeErr","settings","log.error"),sendDBQuery("dashboard_logRotate","settings","log_rotate_days"),sendDBQuery("dashboard_dsChannels","dualStreamCommand","otherChannels"),sendDBQuery("dashboard_dsInterval","dualStreamCommand","timerInterval"),sendDBQuery("dashboard_dsReqMsgs","dualStreamCommand","reqMessages"),sendDBQuery("dashboard_deathctr","deaths",gameTitle),sendDBKeys("dashboard_highlights","highlights"),sendDBKeys("dashboard_modules","modules"),panelStatsEnabled?(sendDBKeys("dashboard_chatCount","panelchatstats"),sendDBKeys("dashboard_modCount","panelmodstats")):sendDBQuery("dashboard_panelStatsEnabled","panelstats","enabled")}function _(){var e=$("#logRotateInput").val();e.length>0&&(sendDBUpdate("dashboard_updateLogRotate","settings","log_rotate_days",e),setTimeout(function(){sendDBQuery("dashboard_logRotate","settings","log_rotate_days")},TIMEOUT_WAIT_TIME))}function y(e){panelMatch(gameTitle,"__not_loaded__")||($("#deathCounterValue").html('<i  class="fa fa-spinner fa-spin" />'),sendCommand("deathctr "+e),setTimeout(function(){sendDBQuery("dashboard_deathctr","deaths",gameTitle)},TIMEOUT_WAIT_TIME))}function w(e,t){return panelStrcmp(e.key,t.key)}function x(e,t){$("#moduleStatus_"+t).html('<i  class="fa fa-spinner fa-spin" />'),sendCommand("module enablesilent "+e),setTimeout(function(){b()},TIMEOUT_WAIT_TIME)}function C(e,t){$("#moduleStatus_"+t).html('<i  class="fa fa-spinner fa-spin" />'),sendCommand("module disablesilent "+e),setTimeout(function(){b()},TIMEOUT_WAIT_TIME)}function k(e){$("#"+e).html('<i class="fa fa-spinner fa-spin" />'),"logFile"==e&&(console.log(e),"true"==c?sendDBUpdate("dashboard_loggingModeFile","settings","log.file","false"):sendDBUpdate("dashboard_loggingModeFile","settings","log.file","true")),"logError"==e&&("true"==h?sendDBUpdate("dashboard_loggingModeFile","settings","log.error","false"):sendDBUpdate("dashboard_loggingModeFile","settings","log.error","true")),"logEvent"==e&&("true"==u?sendDBUpdate("dashboard_loggingModeFile","settings","log.event","false"):sendDBUpdate("dashboard_loggingModeFile","settings","log.event","true")),sendCommand("reloadlogs"),setTimeout(function(){b()},TIMEOUT_WAIT_TIME)}function T(e){panelMatch(e,"pausecommands")&&(e+=$.globalPauseMode?" clear":" 300"),sendCommand(e),setTimeout(function(){$.globalDoQuery()},TIMEOUT_WAIT_TIME)}function D(){var e=$("#streamTitleInput").val();e.length>0&&(sendCommand("settitlesilent "+e),$("#streamTitleInput").val(e))}function I(){var e=$("#gameTitleInput").val();e.length>0&&(sendCommand("setgamesilent "+e),$("#gameTitleInput").val(e),gameTitle=e)}function M(){sendCommand("reconnect")}function S(){sendCommand("disconnect")}function E(){$("#showHighlights").html('<i  class="fa fa-spinner fa-spin" />'),sendCommand("highlightpanel "+$("#highlightInput").val()),$("#highlightInput").val(""),setTimeout(function(){sendDBKeys("dashboard_highlights","highlights")},TIMEOUT_WAIT_TIME)}function P(){$("#showHighlightspanel").html('<i  class="fa fa-spinner fa-spin" />'),sendCommand("clearhighlights"),setTimeout(function(){sendDBKeys("dashboard_highlights","highlights")},TIMEOUT_WAIT_TIME)}function N(e,t){var i=$(e).val();i.length>0&&(sendDBUpdate("multiLinkInput","dualStreamCommand",t,i.replace(/\s+/g,"/")),$(e).val(""),$(e).attr("placeholder",i).blur(),setTimeout(function(){sendCommand("reloadmulti")},TIMEOUT_WAIT_TIME),setTimeout(function(){b()},2*TIMEOUT_WAIT_TIME))}function A(e,t){var i=$(e).val();parseInt(i)>=5&&i.length>0&&(sendDBUpdate("multiLinkTimerInput","dualStreamCommand",t,i),$(e).val(""),$(e).attr("placeholder",i).blur(),setTimeout(function(){sendCommand("reloadmulti")},TIMEOUT_WAIT_TIME),setTimeout(function(){b()},2*TIMEOUT_WAIT_TIME))}function H(e,t){var i=$(e).val();i.length>0&&(sendDBUpdate("multiLinkReqMsgsInput","dualStreamCommand",t,i),$(e).val(""),$(e).attr("placeholder",i).blur(),setTimeout(function(){sendCommand("reloadmulti")},TIMEOUT_WAIT_TIME),setTimeout(function(){b()},2*TIMEOUT_WAIT_TIME))}function O(){sendDBUpdate("multiLinkClear","dualStreamCommand","otherChannels","Channel-1 Channel-2"),sendDBUpdate("multiLinkClear","dualStreamCommand","timerToggle","false"),setTimeout(function(){sendCommand("reloadmulti")},TIMEOUT_WAIT_TIME),setTimeout(function(){b()},2*TIMEOUT_WAIT_TIME)}function z(){$("#multiStatus").html('<span class="purplePill" data-toggle="tooltip" title="Multi-Link Enabled"><i class="fa fa-link fa-lg" /></span>'),$('[data-toggle="tooltip"]').tooltip(),sendDBUpdate("multiLinkClear","dualStreamCommand","timerToggle","true"),setTimeout(function(){sendCommand("reloadmulti")},TIMEOUT_WAIT_TIME),setTimeout(function(){b()},2*TIMEOUT_WAIT_TIME)}function W(){$("#multiStatus").html(""),sendDBUpdate("multiLinkClear","dualStreamCommand","timerToggle","false"),setTimeout(function(){sendCommand("reloadmulti")},TIMEOUT_WAIT_TIME),setTimeout(function(){b()},2*TIMEOUT_WAIT_TIME)}function L(){$("#shoutOutInput").val().length>0&&(sendCommand("shoutout "+$("#shoutOutInput").val()),$("#shoutOutInput").val(""))}function F(){$("#chatsidebar").is(":visible")?($("#chatsidebar").fadeOut(1e3),setTimeout(function(){$(".tab-pane").css("width","100%")},1e3),$(window).resize(function(){$(".tab-pane").css("width","100%")})):($("#chatsidebar").fadeIn(1e3),$(window).resize(function(){$(".tab-pane").css("width","100%").css("width","-=300px")}),$(".tab-pane").css("width","100%").css("width","-=300px"))}function R(){$("#disableVideo").is(":visible")?($("#disableVideo").fadeOut(1e3),player.pause()):($("#disableVideo").fadeIn(1e3),player.play())}function j(e){sendCommand("queue "+e)}function B(e,t){$("#amountQueue").val().length>0?sendCommand("queue "+e+" "+$("#amountQueue").val()):sendCommand("queue "+e+" 1"),$("#amountQueue").val("")}var o=[],l=[],u=!1,h=!1,c=!1,f=[],d=[];gameTitle="__not_loaded__",f["false"]='<i class="fa fa-circle text-warning"/>',f["true"]='<i class="fa fa-circle text-success"/>',d["false"]='<i class="fa fa-circle-o" />',d["true"]='<i class="fa fa-circle" />';var m={"./commands/":"","./games/":"","./handlers/":"","./systems/":""},g={"./discord/commands/":"","./discord/games/":"","./discord/handlers/":"","./discord/systems/":""};$("#dashboardPanel").load("/panel/dashboard.html");var q=setInterval(function(){if(isConnected&&TABS_INITIALIZED){var e=$("#tabs").tabs("option","active");0==e&&(b(),clearInterval(q))}},INITIAL_WAIT_TIME);setInterval(function(){var e=$("#tabs").tabs("option","active");0==e&&isConnected&&!isInputFocus()&&(newPanelAlert("Refreshing Dashboard Data","success",1e3),b())},3e4),$.dashboardOnMessage=v,$.dashboardDoQuery=b,$.setStreamTitle=D,$.setGameTitle=I,$.chatReconnect=M,$.setHighlight=E,$.clearHighlights=P,$.setMultiLink=N,$.setMultiLinkTimer=A,$.setMultiReqMsgs=H,$.clearMultiLink=O,$.multiLinkTimerOn=z,$.multiLinkTimerOff=W,$.toggleCommand=T,$.toggleTwitchChat=F,$.toggleTwitchVideo=R,$.toggleLog=k,$.enableModule=x,$.disableModule=C,$.adjustDeathCounter=y,$.shoutOut=L,$.disconnect=S,$.queueCMD=j,$.queueCMDNext=B,$.setLogRotate=_}();