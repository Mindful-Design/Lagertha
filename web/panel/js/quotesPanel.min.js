!function(){function o(e){var a,o="",i="",r=[];try{a=JSON.parse(e.data)}catch(n){return}if(panelHasQuery(a)&&(panelCheckQuery(a,"quotes_quotemessage")&&null!==a.results.quoteMessage&&$("#quoteMessageInput").val(a.results.quoteMessage),panelCheckQuery(a,"quotes_quotes"))){if(0===a.results.length)return void $("#quoteList").html("<i>No Quotes Are Defined</i>");o='<table class="table table-hover table-striped">';for(var t in a.results)i=a.results[t].key,r=JSON.parse(a.results[t].value),quoteDataClean=JSON.parse(a.results[t].value),quoteDataClean[1]=quoteDataClean[1].replace(/,/g,"%2C").replace(/"/g,"''").replace(/'/g,"%27"),o+='<tr class="quoteBG quoteRow"><td class="centerText" rowspan="2">'+i+'</td>    <td class="col-xs-1">        <div id="deleteQuote_'+i+'" type="button" class="btn btn-danger btn-fill  btn-xs"             onclick="$.deleteQuote(\''+i+'\')"><i class="fa fa-trash" />        </div>    </td>    <td class="col-xs-2">        Date: '+$.format.date(parseInt(r[2]),"MM.dd.yy")+'    </td>    <td class="col-xs-4">        <form role="form" onkeypress="return event.keyCode != 13"><div class="form-group form-group-table"><div class="input-group">            <input type="text" class="form-control" id="inlineQuoteEdit_user_'+i+'"                   value="'+r[0]+'" /><span class="input-group-btn">            <button type="button" class="btn btn-default btn-fill  btn-xs"                    onclick="$.updateQuote(\''+i+"', '"+quoteDataClean+'\', \'user\')">                <i class="fa fa-pencil" />            </button></span></div></div></form></td>    <td class="col-xs-4">        <form role="form" onkeypress="return event.keyCode != 13"><div class="form-group form-group-table"><div class="input-group">            <input type="text" class="form-control" id="inlineQuoteEdit_game_'+i+'"                   value="'+(4==r.length?r[3]:"Some Game")+'" /><span class="input-group-btn">            <button type="button" class="btn btn-default btn-fill  btn-xs"                    onclick="$.updateQuote(\''+i+"', '"+quoteDataClean+'\', \'game\')">                <i class="fa fa-pencil" />            </button></span></div></div></form></td></tr><tr class="quoteBG">    <td colspan="5">        <form role="form" onkeypress="return event.keyCode != 13"><div class="form-group form-group-table"><div style="width: 100%" class="input-group">            <input  type="text" class="form-control" id="inlineQuoteEdit_quote_'+i+'"                   value="'+r[1].replace(/"/g,"''")+'" /><span class="input-group-btn">            <button type="button" class="btn btn-default btn-fill  btn-xs"                    onclick="$.updateQuote(\''+i+"', '"+quoteDataClean+"', 'quote')\">                <i class=\"fa fa-pencil\" />            </button></span></div></div></form></td></tr>";o+="</table>",$("#quoteList").html(o),handleInputFocus()}}function i(){sendDBKeys("quotes_quotes","quotes"),sendDBQuery("quotes_quotemessage","settings","quoteMessage")}function r(){var e=$("#quoteMessageInput").val();e.length>0&&($("#quoteMessageInput").val("Updating..."),sendDBUpdate("quotes_quotemessage","settings","quoteMessage",e),setTimeout(function(){i()},TIMEOUT_WAIT_TIME))}function n(o){$("#deleteQuote_"+o).html(e),sendCommand("delquotesilent "+o),a||(a=!0,setTimeout(function(){i(),a=!1},4*TIMEOUT_WAIT_TIME))}function t(e,a,o){var r=$("#inlineQuoteEdit_"+o+"_"+e).val(),n=a.split(",");r.length>0&&(panelMatch(o,"quote")&&(n[1]=r.replace(/"/g,"''")),panelMatch(o,"game")&&(n[1]=n[1].replace(/%2C/g,",").replace(/%27/g,"'"),n[3]=r),panelMatch(o,"user")&&(n[1]=n[1].replace(/%2C/g,",").replace(/%27/g,"'"),n[0]=r),sendDBUpdate("quotes_update","quotes",e,JSON.stringify(n)),setTimeout(function(){i()},TIMEOUT_WAIT_TIME))}function s(){var e=$("#addQuoteInput").val();e.length>0&&($("#addQuoteInput").val("Adding...").blur(),sendCommand("addquotesilent "+String(e).replace(/"/g,"''")),setTimeout(function(){i(),$("#addQuoteInput").val("")},2*TIMEOUT_WAIT_TIME))}function l(){sendDBDelete("quotes_quotemessage","settings","quoteMessage"),$("#quoteMessageInput").val(""),setTimeout(function(){i()},4*TIMEOUT_WAIT_TIME)}var e='<i  class="fa fa-spinner fa-spin" />',a=!1;$("#quotesPanel").load("/panel/quotes.html");var u=setInterval(function(){if(isConnected&&TABS_INITIALIZED){var e=$("#tabs").tabs("option","active");12==e&&(i(),clearInterval(u))}},INITIAL_WAIT_TIME);setInterval(function(){var e=$("#tabs").tabs("option","active");12==e&&isConnected&&!isInputFocus()&&(newPanelAlert("Refreshing Quotes Data","success",1e3),i())},3e4),$.quotesOnMessage=o,$.quotesDoQuery=i,$.deleteQuote=n,$.updateQuote=t,$.addQuote=s,$.setQuoteMessage=r,$.delQuoteMsg=l}();