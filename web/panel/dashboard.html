<!--

 Copyright (C) 2017 phantombot.tv

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
 @author IllusionaryOne
-->

<!-- This is outside of the accordion, so will always be on top of the tab -->

<!-- Accordion object.  Each section is separated by an <h3 /> header and the content is to be enclosed in <div />.  -->
<div id="dashboardAccordion">

    <div class="row">
        <div id="hideShow" class="col-md-4 col-sm-12 col-xs-12">
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Twitch</h4>
                        </div>
                        <div class="content">

                            <div class="legend legendTwitch">
                                <span id="lastFollow" placeholder="-" />
                                <span id="lastSub" placeholder="-" />
                                <span id="lastReSub" placeholder="-" />
                                <span id="lastDonator" placeholder="-" />
                            </div>
                            <br>

                            <form role="form">
                                <div class="form-group" onkeypress="return event.keyCode != 13">
                                    <label for="streamTitle">Stream Title</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="streamTitleInput" placeholder="Stream Title">
                                        <span class="input-group-btn">
                                        <button class="btn btn-info btn-fill" type="button" onclick="$.setStreamTitle()">Update</button></span>

                                    </div>
                                </div>
                            </form>


                            <form role="form">
                                <div class="form-group" onkeypress="return event.keyCode != 13">
                                    <label for="gameTitle">Game Title</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="gameTitleInput" placeholder="Game Title">
                                        <span class="input-group-btn">
                                        <button class="btn btn-info btn-fill" type="button" onclick="$.setGameTitle()">Update</button>
                                        </span>
                                    </div>
                                </div>
                            </form>
                            <div class="legend">
                                <button type="button" class="btn btn-danger btn-fill btn-fill" onclick="$.disconnect()" data-toggle="tooltip" title="NOTE: This will remove the bot from your channel, you will have to manually rejoin it.">Remove</button>

                                <button type="button" class="btn btn-warning btn-fill" onclick="$.chatReconnect()" data-toggle="tooltip" title="Reconnect Lagertha to your Twitch channel. This does not reconnect if the 'Remove' action was performed.">Reconnect</button>

                                <button type="button" class="btn btn-info btn-fill" onclick="$.toggleTwitchChat()">Toggle Chat</button>
                                <button type="button" class="btn btn-info btn-fill" onclick="$.toggleTwitchVideo()">Toggle Video</button>
                            </div>

                        </div>
                    </div>

                </div>

            </div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12" id="_shoutoutPanelDisabled">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Shoutout a Streamer</h4>
                        </div>
                        <div class="content">
                            <div>
                                <div id="_shoutoutPanel">
                                    Shoutout a streamer! Will display their Twitch URL in chat along with game being played, or last played.<br><br>

                                    <form role="form">
                                        <div class="form-group" onkeypress="return event.keyCode != 13">
                                            <label for="shoutOut">Twitch Channel to Shoutout</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="shoutOutInput" placeholder="Twitch Channel">
                                                <span class="input-group-btn">
                                        <button class="btn btn-info btn-fill" type="button" onclick="$.shoutOut()">Submit</button>
                                        </span>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Twitch Modules
                                <div class="btn btn-info btn-xs" data-toggle="collapse" href="#collapse2"><i class="fa fa-bars"></i></div>
                            </h4>
                        </div>
                        <div id="collapse2" class="content panel-collapse collapse">
                            <div>
                                <div id="modulesList" style="height: 270px; overflow-x: hidden;" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Discord Modules
                                <div class="btn btn-info btn-xs" data-toggle="collapse" href="#collapse3"><i class="fa fa-bars"></i></div>
                            </h4>
                        </div>
                        <div id="collapse3" class="content panel-collapse collapse">
                            <div>
                                <i>These are modules for our discord integration. If you do not have your bot connected to discord the enable buttons will not work and the modules
            may not show up.</i>
                                <div id="discordModulesList" style="height: 210px; overflow-x: hidden;" />
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Logging Configuration
                                <div class="btn btn-info btn-xs" data-toggle="collapse" href="#collapse1"><i class="fa fa-bars"></i></div>
                            </h4>
                        </div>
                        <div id="collapse1" class="content panel-collapse collapse">
                            <div>
                                <table class="table table-hover table-striped">
                                    <tr>
                                        <td>Event logging</td>
                                        <td>
                                            <div id="logEvent" style="float:right" />
                                        </td>
                                        <td>
                                            <div data-toggle="tooltip" style="float:right" title="Toggle" class="button" onclick="$.toggleLog('logEvent');"><i class="fa fa-refresh" />
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Error logging</td>
                                        <td>
                                            <div id="logError" style="float:right" />
                                        </td>
                                        <td>
                                            <div data-toggle="tooltip" style="float:right" title="Toggle" class="button" onclick="$.toggleLog('logError');"><i class="fa fa-refresh" />
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>File & chat logging</td>
                                        <td>
                                            <div id="logFile" style="float:right" />
                                        </td>
                                        <td>
                                            <div data-toggle="tooltip" style="float:right" title="Toggle" class="button" onclick="$.toggleLog('logFile');"><i class="fa fa-refresh" />
                                            </div>
                                        </td>
                                    </tr>
                                </table>

                                <form role="form">
                                    <div class="form-group" onkeypress="return event.keyCode != 13">
                                        <label for="logRotate">Number of Days to Keep Logs</label>
                                        <div class="input-group">
                                            <input type="number" min="0" class="form-control" id="logRotateInput" placeholder="Days" data-toggle="tooltip" title="Days to keep logs, 0 means do not delete logs.">
                                            <span class="input-group-btn">
                                        <button class="btn btn-info btn-fill" type="button" onclick="$.setLogRotate()">Submit</button>
                                        </span>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="hideShow2" class="col-md-8 col-sm-12 col-xs-12">
            <div class="row">
                <div class="videoMove col-md-12 col-sm-12 col-xs-12" id="disableVideo">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Video Preview</h4>
                        </div>
                        <div class="content">
                            <div class="embed-responsive embed-responsive-16by9">
                                <iframe id="videoPreview" class="embed-responsive-item" src="" height="622" width="350" frameborder="0" scrolling="no" allowfullscreen="true"></iframe>
                                <script>
                                    document.getElementById("videoPreview").src = 'http://player.twitch.tv/?channel=' + getChannelName() + '&muted=true&autoplay=false';
                                    /*var options = {width: 622,height: 350,channel: getChannelName()};var player = new Twitch.Player("videoPreview", options);player.setVolume(0.5);*/

                                </script>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="hideShow3" class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Chat Configuration and Statistics
                                <div class="btn btn-info btn-xs" data-toggle="collapse" href="#collapse5"><i class="fa fa-bars"></i></div>
                            </h4>
                            <p class="category">Statistics last 5 days</p>
                        </div>
                        <div id="collapse5" class="content panel-collapse collapse table-responsive">
                            <div class="legend">
                                <button type="button" class="btn btn-info btn-fill pull-center" onclick="$.toggleCommand('pausecommands')">Command Pause</button>
                                <button type="button" class="btn btn-info btn-fill pull-center" onclick="$.toggleCommand('togglewhispermode')">Whisper Mode</button>
                                <button type="button" class="btn btn-info btn-fill pull-center" onclick="$.toggleCommand('toggleme')">Action (/me) Mode</button>
                                <button type="button" class="btn btn-info btn-fill pull-center" onclick="$.toggleCommand('mute')">Mute Mode</button>
                            </div>

                            <div id="panelStatsEnabled" />
                            <br>
                            <div style="overflow: auto;">
                                <table class="table table-hover table-striped">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th><i class="fa fa-circle text-info"></i>Chat Count</th>
                                            <th><i class="fa fa-circle text-danger"></i>Timeouts</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span id="chatDate-0" /></td>
                                            <td><span id="chatCount-0" /></td>
                                            <td><span id="modCount-0" /></td>

                                        </tr>
                                        <tr>
                                            <td><span id="chatDate-1" /></td>
                                            <td><span id="chatCount-1" /></td>
                                            <td><span id="modCount-1" /></td>
                                        </tr>
                                        <tr>
                                            <td><span id="chatDate-2" /></td>
                                            <td><span id="chatCount-2" /></td>
                                            <td><span id="modCount-2" /></td>
                                        </tr>
                                        <tr>
                                            <td><span id="chatDate-3" /></td>
                                            <td><span id="chatCount-3" /></td>
                                            <td><span id="modCount-3" /></td>
                                        </tr>
                                        <tr>
                                            <td><span id="chatDate-4" /></td>
                                            <td><span id="chatCount-4" /></td>
                                            <td><span id="modCount-4" /></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div id="panelStatsGraph" class="flot-chart" style="width:100%; height: 250px" />
                            <div class="flot-chart-legend flot-chart-legend--line"></div>
                            <div class="footer">
                                <div class="legend">
                                </div>
                                <hr>
                                <div class="stats">
                                    <i class="fa fa-history"></i> Updates continuously
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



    </div>
    <div id="hideShow4" class="row">
        <div class="col-md-4 col-sm-12 col-xs-12" id="_highlightsPanelDisabled">
            <div class="card">
                <div class="header">
                    <h4 class="title">Highlights</h4>
                </div>
                <div class="content">
                    <div>
                        <div id="_highlightsPanel">
                            Make a note of an event in the broadcast to make creating highlights in Twitch easier later.
                            <br><br>

                            <form role="form">
                                <div class="form-group" onkeypress="return event.keyCode != 13">
                                    <label for="highlight">Create Highlight</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="highlightInput" placeholder="Game Highlight">
                                        <span class="input-group-btn">
                                        <button class="btn btn-info btn-fill" type="button" onclick="$.setHighlight()">Submit</button>
                                        </span>
                                    </div>
                                </div>
                            </form>
                            <br>

                            <button type="button" class="btn btn-danger btn-fill " onclick="$.clearHighlights()">Clear Highlights</button>
                            <label>Current Highlights</label><br>
                            <span id="showHighlights" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12 col-xs-12" id="_deathCtrPanelDisabled">
            <div class="card">
                <div class="header">
                    <h4 class="title">Death Counter</h4>
                </div>
                <div class="content">
                    <div>
                        <div id="_deathCtrPanel">
                            <table class="table table-hover table-striped">
                                <tr style="vertical-align: middle">
                                    <td>Deaths: <span id="deathCounterValue">Fetching Game...</span></td>
                                    <td>
                                        <button type="button" class="btn btn-info btn-fill" onclick="$.adjustDeathCounter('add')"><i class="fa fa-plus fa-1x" /></button>
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-info btn-fill" onclick="$.adjustDeathCounter('sub')"><i class="fa fa-minus fa-1x" /></button>
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-info btn-fill" onclick="$.adjustDeathCounter('reset')"><i class="fa fa-eraser fa-1x" /></button>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12 col-xs-12" id="_multiLinkPanelDisabled">
            <div class="card">
                <div class="header">
                    <h4 class="title">Multi-Link</h4>
                </div>
                <div class="content">

                    <div>
                        <div id="_multiLinkPanel">
                            Multi-Link provides a link to share multiple Twitch channels in one UI. Great for races or other competititions. Provide a space delimited list of channels. Set a timer to let chat know on a regular basis that the Multi-Link is on.
                            <br><br>

                            <form role="form">
                                <div class="form-group" onkeypress="return event.keyCode != 13">
                                    <label for="multi-link">Multi-Link Channels</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="multiLinkInput" placeholder="Channel-1 Channel-2" data-toggle="tooltip" title="Place channels that you want to be in the multi-link, separate them with a space. Do not include your channel in this.">
                                        <span class="input-group-btn">
                                        <button class="btn btn-info btn-fill" type="button" onclick="$.setMultiLink('#multiLinkInput', 'otherChannels')">Submit</button>
                                        </span>
                                    </div>
                                </div>
                            </form>


                            <form role="form">
                                <div class="form-group" onkeypress="return event.keyCode != 13">
                                    <label for="multi-link">Timer Interval</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="multiLinkTimerInput" placeholder="Interval" data-toggle="tooltip" title="Set the interval (in minutes) for the multi-link to be said in chat. Minimum is 5 minutes.">
                                        <span class="input-group-btn">
                                        <button class="btn btn-info btn-fill" type="button" onclick="$.setMultiLinkTimer('#multiLinkTimerInput', 'timerInterval')">Submit</button>
                                        </span>
                                    </div>
                                </div>
                            </form>


                            <form role="form">
                                <div class="form-group" onkeypress="return event.keyCode != 13">
                                    <label for="multi-link">Required Messages</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="multiLinkReqMsgsInput" placeholder="Amount" data-toggle="tooltip" title="Set the amount of messages required before sending the multi-link.">
                                        <span class="input-group-btn">
                                        <button class="btn btn-info btn-fill" type="button" onclick="$.setMultiReqMsgs('#multiLinkReqMsgsInput', 'reqMessages')">Submit</button>
                                        </span>
                                    </div>
                                </div>
                            </form>

                            <button type="button" class="btn btn-success btn-fill" onclick="$.multiLinkTimerOn()">Multi-Link Timer On</button>
                            <button type="button" class="btn btn-danger btn-fill" onclick="$.multiLinkTimerOff()">Multi-Link Timer Off</button>
                            <button type="button" class="btn btn-danger btn-fill" onclick="$.clearMultiLink()">Clear Multi-Link</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript" src="panel/js/jqueryui-bootstrap-adapter.js"></script>
<!-- Run the Acordion -->

<script>
    $("#dashboardAccordion").accordion({
        clearStyle: true,
        heightStyle: "panel",
        icons: null
    });


    $(function() {
        var gameList = $.gamesList;
        $("#gameTitleInput").autocomplete({
            source: gameList,
            minLength: 4
        });
    });

    $('[data-toggle="tooltip"]').tooltip({
        trigger: 'hover'
    });

    handleInputFocus();

</script>
